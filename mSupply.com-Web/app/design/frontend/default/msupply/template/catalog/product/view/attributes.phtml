<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category   design_default
 * @package    Mage
 * @copyright  Copyright (c) 2008 Irubin Consulting Inc. DBA Varien (http://www.varien.com)
 * @license    http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/**
 * Product additional attributes template
 *
 * @see Mage_Catalog_Block_Product_View_Attributes
 */
?>
<?php
    $_helper = $this->helper('catalog/output');
    $_product = $this->getProduct()
?>
<?php if($_additional = $this->getAdditionalData()): ?>
<div class="attribute-specs">
    <table cellspacing="0" class="data-table table table-bordered clear" id="product-attribute-specs-table">
	<?php
		$case = 'case_unit';
		$i =0;
		foreach($_additional as $code=>$data)
		{
			if((trim($_additional[$code]['value']) !='' && $_additional[$code]['value'] !='No' && $_additional[$code]['value'] !='N/A') && isset($_additional[$code.'_uom']))
			{
				if(trim($_additional[$code.'_uom']['value']) !='' && $_additional[$code.'_uom']['value'] !='No' && $_additional[$code.'_uom']['value'] !='N/A')
				{
					$_additional[$code]['value'] = $_additional[$code]['value'].'/'.$_additional[$code.'_uom']['value'];
					unset($_additional[$code.'_uom']);
				}
			}
			if((strpos($code,$case) !== false && strpos($code,'case_unit_weight') === false) && ($_additional['case_uom']['value'] !='' && $_additional['case_uom']['value'] !='No' && $_additional['case_uom']['value'] !='N/A') )
			{
				$_additional[$code]['value'] = $_additional[$code]['value'].'/'.$_additional['case_uom']['value'];
				$i=1;
			} 
			if(isset($_additional['weight']['value']) && isset($_additional['weightunit']['value']))
			{
				$_additional['weight']['value'] = $_additional['weight']['value'].'/'.$_additional['weightunit']['value'];
				unset($_additional['weightunit']);
			}
		}
		if($i == 1)
		{
			unset($_additional['case_uom']);
		}
	?>
	
	<?php foreach ($_additional as $_data): ?>
	   <?php if ((string)$_data['value'] != '' and $_data['value'] != 'N/A' and $_data['value'] != 'No'): ?>
			   <tr>
					<td><?php echo $this->htmlEscape($this->__($_data['label'])) ?></th>
					<td class="data"><?php echo $_helper->productAttribute($_product, $_data['value'], $_data['code']) ?></td>
				</tr>
		  <?php endif; ?>
		<?php endforeach; ?>
	</table>
    <script type="text/javascript">decorateTable('product-attribute-specs-table')</script>
</div>
<?php endif;?>